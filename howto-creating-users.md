---

copyright:
  years: 2019
lastupdated: "2019-04-30"

subcollection: databases-for-postgresql

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:codeblock: .codeblock}
{:pre: .pre}
{:screen: .screen}
{:tip: .tip}


# Creating Users 
{: #creating-users}

When you provision a new deployment in {{site.data.keyword.cloud_notm}}, you are automatically given an admin user to access and manage PostgreSQL. You can also add users to your deployment through the _Service Credentials_ panel, the CLI, and the Cloud Databases API.

The admin user and other users have slightly different privileges on the PostgreSQL databases. See the [PostgreSQL Roles and Privileges](/docs/services/databases-for-postgresql?topic=databases-for-postgresq-roles-privileges) page for more information.
{: .tip}

## Creating Users in _Service Credentials_

Creating users in _Service Credentials_ panel allows users for PostgreSQL to be integrated with your {{site.data.keyword.cloud_notm}} account and [IAM](/docs/services/databases-for-postgresql?topic=databases-for-postgresql-iam). 

1. Navigate to the service dashboard for your service.
2. Click _Service Credentials_ to open the _Service Credentials_ panel.
3. Click **New Credential**.
4. Choose a descriptive name for your new credential. 
5. (Optional) Specify if the new credentials should use a public or private endpoint. Use either `{ "service-endpoints": "public" }` / `{ "service-endpoints": "private" }` in the _Add Inline Configuration Parameters_ field to generate connection strings using the specified endpoint. Use of the endpoint is not enforced, it just controls which hostnames are in the connection strings. Public endpoints are generated by default.
6. Click **Add** to provision the new credentials. A username and password, and an associated database user in the PostgreSQL database are auto-generated.

The new credentials appear in the table, and the connection strings are available as JSON in a click-to-copy field under _View Credentials_.

### Using Service IDs

Because {{site.data.keyword.databases-for-postgresql}} is an IAM service, you can use [Service IDs](/docs/iam?topic=iam-serviceids) to manage access to this service. For example, by using an IAM-managed Service ID, that user gets a PostgreSQL user and connection string in _Service Credentials_, and has API key access to the {{site.data.keyword.cloud_notm}} Databases API.  If you have a Service ID, enter its information under _Select Service ID_.

### _Service Credentials_ User Roles

Users that you create through the _Service Credentials_ panel are members of [`ibm-cloud-base-user`](/docs/services/databases-for-postgresql?topic=databases-for-postgresql-roles-privileges#the-ibm-cloud-base-user). They are able to login, create users, and create databases.

## Creating Users through the CLI and the API

If you manage your service through the {{site.data.keyword.cloud_notm}} CLI and the cloud databases plug-in, you can generate a new user with `cdb user-create`. For example, to create a new user for a deployment named "example-deployment", use 

`ibmcloud cdb user-create example-deployment <newusername> <newpassword>`

To make a user with the API, use 
```
curl -X POST 'https://api.{region}.databases.cloud.ibm.com/v4/ibm/deployments/{id}/users' \
-H "Authorization: Bearer $APIKEY" \
-H "Content-Type: application/json" \
-d '{"username":"jane_smith", "password":"newsupersecurepassword"}'
```

You do not need to specify the endpoint to use when creating users through the CLI or API. [Service Endpoints](/docs/services/databases-for-postgresql?topic=cloud-databases-service-endpoints) are not enforced on a user-level basis, and you can specify which to use when you [retrieve connection strings](/docs/services/databases-for-postgresql?topic=databases-for-postgresql-connection-strings).
{: .tip}

### CLI and API Users Roles

Users that you create through the API and the CLI are members of [`ibm-cloud-base-user`](/docs/services/databases-for-postgresql?topic=databases-for-postgresql-roles-privileges#the-ibm-cloud-base-user). They are able to login, create users, and create databases.

### Adding a User to _Service Credentials_

Users created directly from the API and CLI do not appear in _Service Credentials_. If you want to add them there, you can create a new credential with the existing user information.

Enter the user name and password in the JSON field _Add Inline Configuration Parameters_, or specify a file where the JSON information is stored. For example, `{"existing_credentials":{"username":"Robert","password":"supersecure"}}`.

Generating credentials from an existing user does not check for or create that user.
{: tip}

## Creating Users with `psql`

You can bypass creating users through IBM Cloud entirely, and create users directly in PostgreSQL with `psql`. This allows you to make use of PostgreSQL's native [role and user management](https://www.postgresql.org/docs/current/database-roles.html). Users/roles created in `psql` have to have all of their privileges set manually, as well as privileges to the objects that they create. If they are granted login privileges, then they are able to connect using the connection strings for your deployment.

Users created directly in PostgreSQL do not appear in _Service Credentials_, but you can add them. These users will not be integrated with IAM controls, even if added to _Service Credentials_.
{: .tip}